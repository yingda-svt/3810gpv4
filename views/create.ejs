<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Upload Homework Submission</title>
</head>
<body>
    <h1>Upload Homework Submission</h1>
    <form action="/submissions/create" method="POST" enctype="multipart/form-data">
        <!-- Select Assignment (linked to Course via assignment_id in Database) -->
        <p>
            <label for="assignmentId">Select Assignment:</label>
            <select name="assignmentId" id="assignmentId" required>
                <% if (assignments && assignments.length > 0) { %>
                    <% assignments.forEach(assignment => { %>
                        <option value="<%= assignment.assignment_id %>">
                            <%= assignment.title %> (Course: <%= assignment.course_name %> | Due: <%= new Date(assignment.due_date).toLocaleDateString() %>)
                        </option>
                    <% }) %>
                <% } else { %>
                    <option disabled>No assignments available for your courses</option>
                <% } %>
            </select>
        </p>

        <!-- Upload Submission File -->
        <p>
            <label for="submissionFile">Upload Homework File:</label>
            <input type="file" name="submissionFile" id="submissionFile" accept=".pdf,.doc,.docx,.txt,.jpg,.png" required>
            <br>
            <small>Supported formats: PDF, Word, TXT, Images (Max size: 10MB)</small>
        </p>

        <!-- Hidden Fields: Link to Logged-in User & Auto-set Submission Date (handled by backend) -->
        <input type="hidden" name="userId" value="<%= loggedInUser.user_id %>">
        <button type="submit">Submit Homework</button>
    </form>
    <p><a href="/dashboard">Back to Student Dashboard</a></p>
</body>
</html>

